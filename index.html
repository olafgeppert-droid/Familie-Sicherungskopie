<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Familienringe â€“ Stammbaum &amp; Verwaltung</title>
<link href="styles.css" rel="stylesheet"/>
</head>
<body>
<!-- Login Overlay -->
<div class="overlay" id="loginOverlay">
<div class="login-card glass">
<h2>ğŸ” Familienringe</h2>
<p>Bitte Passwort eingeben, um die App zu Ã¶ffnen.</p>
<input id="pwd" placeholder="Passwort" type="password"/>
<button class="primary" id="btnLogin">Anmelden</button>
<div aria-live="polite" class="error" id="loginMsg"></div>
</div>
</div>
<header class="topbar glass no-print">
<div class="brand">
<div class="logo">ğŸ’</div>
<div>
<h1>Familienringe â€“ Stammbaum</h1>
<small>lokal gespeichert â€¢ exportierbar â€¢ druckbar</small>
</div>
</div>
<div class="toolbar">
<button class="primary" id="btnAdd">â• Person</button>
<button id="btnAddPartner">â¤ï¸ Partner</button>
<button id="btnUndo" title="RÃ¼ckgÃ¤ngig">â†¶ RÃ¼ckgÃ¤ngig</button>
<button id="btnRedo" title="Wiederholen">â†· Wiederholen</button>
<input id="search" placeholder="ğŸ” Suche (Name oder Code)" type="search"/>
<button id="btnSearch">Suchen</button>
<button id="btnShowAll">Alle</button>
<div class="spacer"></div>
<button id="btnDraw">ğŸŒ³ Baum aktualisieren</button>
<button id="btnExport">ğŸ’¾ Export</button>
<button id="btnExportCsv">ğŸ“„ CSV</button>
<label class="file-label" title="JSON importieren">
        â¤´ï¸ Import <input accept="application/json" id="fileImport" type="file"/>
</label>
<button id="btnPrintTable" title="Tabelle drucken">ğŸ–¨ï¸ Tabelle</button>
<button id="btnPrintTree" title="Baum drucken">ğŸ–¨ï¸ Baum</button>
</div>
</header>
<main>
<section class="pane glass" id="paneTable">
<h3>ğŸ“„ Personen â€“ Tabelle</h3>
<div class="table-wrap">
<table id="peopleTable">
<thead>
<tr>
<th>Personenâ€‘Code</th>
<th>Name</th>
<th>Geburtsdatum</th>
<th>Geburtsort</th>
<th>Geschlecht</th>
<th>Generation</th>
<th>Elternâ€‘Code</th>
<th>Partnerâ€‘Code</th>
<th>Geerbt von</th>
<th>Ringâ€‘Code</th>
<th>Kommentar</th>
<th class="no-print">Aktion</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</section>
<section class="pane glass" id="paneTree">
<h3>ğŸŒ³ Grafischer Stammbaum</h3>
<div class="tree-wrap">
<svg aria-label="Stammbaum" height="700" id="treeSvg" role="img" width="1400"></svg>
</div>
</section>
</main>
<footer class="footer muted no-print">
<small>Tipps: Suche funktioniert mit Namen oder Codes (z.â€¯B. â€1Câ€œ). Daten werden im Browser gespeichert (localStorage).</small>
</footer>
<!-- Dialog: Person hinzufÃ¼gen -->
<dialog class="dlg" id="dlgAdd">
<form id="formAdd">
<h3>â• Person hinzufÃ¼gen</h3>
<div class="grid">
<label>Elternâ€‘Code <input name="parentCode" placeholder="z.â€¯B. 1 oder 1A"/></label>
<label>Name <input name="name"/></label>
<label>Geburtsdatum <input name="birthDate" placeholder="TT.MM.JJJJ"/></label>
<label>Geburtsort <input name="birthPlace"/></label>
<label>Geschlecht
          <select name="gender">
<option value="">â€“</option>
<option value="m">m</option>
<option value="w">w</option>
<option value="divers">divers</option>
</select>
</label>
<label>Kommentar <input name="note"/></label>
<label>Vererbt?
          <select name="inherited">
<option>nein</option>
<option>ja</option>
</select>
</label>
<label>Geerbt von (Code) <input name="inheritedFrom" placeholder="z.â€¯B. 1"/></label>
</div>
<div class="hint">Der Ringâ€‘Code wird automatisch generiert: Kinder von â€1â€œ â†’ 1A, 1B, 1C â€¦; Folgegenerationen â†’ Ziffern anfÃ¼gen; Partner â†’ â€xâ€œ-Suffix.</div>
<div class="hint"><strong>Hinweis:</strong> hat die Person keinen Familienwappenring, bitte im Kommentar vermerken.</div>
<menu>
<button class="btn-cancel" onclick="this.closest('dialog').close()" type="button">Abbrechen</button>
<button class="primary" id="dlgAddOk" type="button">Speichern</button>
</menu>
</form>
</dialog>
<!-- Dialog: Partner hinzufÃ¼gen -->
<dialog class="dlg" id="dlgPartner">
<form id="formPartner">
<h3>â¤ï¸ Partner hinzufÃ¼gen</h3>
<div class="grid">
<label>Partner von Code <input name="personCode" placeholder="z.â€¯B. 1A"/></label>
<label>Name des Partners <input name="name"/></label>
<label>Geschlecht
          <select name="gender">
<option value="">â€“</option>
<option value="m">m</option>
<option value="w">w</option>
<option value="divers">divers</option>
</select>
</label>
<label>Kommentar <input name="note"/></label>
</div>
<menu>
<button class="btn-cancel" onclick="this.closest('dialog').close()" type="button">Abbrechen</button>
<button class="primary" id="dlgPartnerOk" type="button">Speichern</button>
</menu>
</form>
</dialog>
<!-- Dialog: Person bearbeiten -->
<dialog class="dlg" id="dlgEdit">
<form id="formEdit">
<h3>âœï¸ Person bearbeiten</h3>
<div class="grid">
<label>Personenâ€‘Code <input name="code" readonly=""/></label>
<label>Name <input name="name"/></label>
<label>Geburtsdatum <input name="birthDate" placeholder="TT.MM.JJJJ"/></label>
<label>Geburtsort <input name="birthPlace"/></label>
<label>Geschlecht
          <select name="gender">
<option value="">â€“</option>
<option value="m">m</option>
<option value="w">w</option>
<option value="divers">divers</option>
</select>
</label>
<label>Vererbt?
          <select name="inherited">
<option>nein</option>
<option>ja</option>
</select>
</label>
<label>Geerbt von (Code) <input name="inheritedFrom" placeholder="z.â€¯B. 1"/></label>
<label>Kommentar <input name="note"/></label>
</div>
<div class="hint">Ã„nderungen wirken sich sofort auf Tabelle und Baum aus. Personenâ€‘Code ist fix, da er Referenzen (Kinder/Partner) besitzt.</div>
<menu>
<button class="btn-cancel" onclick="this.closest('dialog').close()" type="button">Abbrechen</button>
<button class="primary" id="dlgEditOk" type="button">Speichern</button>
</menu>
</form>
</dialog>
<!-- Dialog: Export (eigener Text & SchaltflÃ¤chen) -->
<dialog class="dlg" id="dlgExport">
<form id="formExport">
<h3>ğŸ’¾ Export</h3>
<p>WÃ¤hle deinen Speicherort aus</p>
<menu>
<button class="btn-cancel" onclick="this.closest('dialog').close()" type="button">Abbrechen</button>
<button class="primary" id="btnExportSaveAs" type="button">Speichern unter</button>
<button id="btnExportDownload" type="button">Im Downloadordner speichern</button>
</menu>
</form>
</dialog>
<!-- Dialog: Importâ€‘Konflikte -->
<dialog class="dlg" id="dlgImportConf">
<form id="formImportConf">
<h3>âš ï¸ Import â€“ Duplikate</h3>
<p id="impSummary">Es wurden Duplikate gefunden.</p>
<fieldset class="choices">
<label><input checked="" name="impMode" type="radio" value="overwrite"/> Ãœberschreiben (importierte Daten ersetzen vorhandene)</label>
<label><input name="impMode" type="radio" value="skip"/> Ãœberspringen (vorhandene behalten)</label>
<label><input name="impMode" type="radio" value="keepboth"/> Beide behalten (importierte Duplikate mit â€â€‘DUPâ€œ im Personenâ€‘Code)</label>
</fieldset>
<menu>
<button class="btn-cancel" onclick="this.closest('dialog').close()" type="button">Abbrechen</button>
<button class="primary" id="dlgImportOk" type="button">Fortfahren</button>
</menu>
</form>
</dialog>
<script src="app.js"></script>

<div class="button-container">
<button id="btnStatistics">ğŸ“Š Statistik anzeigen</button>
<button id="btnExportPDF">ğŸ§¾ Export als PDF</button>
<button id="btnExportCSV">ğŸ“ Export als CSV</button>
<button id="btnExportJSON">ğŸ§¬ Export als JSON</button>
<button id="btnAddPartner">â• Partner hinzufÃ¼gen</button>
<button id="btnMarkSeparation">ğŸ’” Trennung markieren</button>
<button id="btnShareIOS">ğŸ“¤ Teilen (iOS)</button>
</div>
</body>
</html>
